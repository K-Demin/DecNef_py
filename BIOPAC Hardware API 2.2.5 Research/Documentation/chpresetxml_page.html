<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>BIOPAC Hardware API 2.2.5: Channel Presets XML File</title>
<style type="text/css">
		@import "biopacapi.css";
		@import "tabs.css";
</style>
</head>
<body>
<!-- Generated on Fri Feb 16 10:56:29 2024 -->
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a class="anchor" name="chpresetxml_page">Channel Presets XML File</a></h1><ul>
<li><a class="el" href="chpresetxml_page.html#ch1_sec">Overview</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch2_sec">Introduction</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sec">Format Specification</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch4_sec">Format Validation</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch5_sec">Format Styling</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch6_sec">File Dependencies</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch7_sec">Example</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch8_sec">Annotated Example</a></li>
</ul>
<h2><a class="anchor" name="ch1_sec">
Overview</a></h2>
Channel Presets are definitions of analog channel settings and calculation channel settings for BIOPAC's BSL and Acq<em>Knowledge</em> software products. These presets include preset name, channel label, channel units, scaling, and hardware or calculation settings. Some of these settings are sent to the MP device. The presets are stored in a binary file that the software can interpret.<h2><a class="anchor" name="ch2_sec">
Introduction</a></h2>
The BIOPAC Hardware API (BHAPI) utilizes an XML format for persistent storage. Currently, BHAPI only supports analog channel presets.<p>
The Preset Files directory in the BHAPI install directory contains a file called "channelpresets.xml." This file is similar to the MP36R/MP36A preset file that shipped with BSL 3.7.3, BSL 3.8. BHAPI users can utilize and modify this file or create their own by following the specification below.<h2><a class="anchor" name="ch3_sec">
Format Specification</a></h2>
<ul>
<li><a class="el" href="chpresetxml_page.html#ch3_sub1sec">Limitations</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub2sec">XML Declaration</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub3sec">XML Stylesheet Declaration</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub4sec">Element Style</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub5sec">Channel Preset Collection Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub6sec">Analog Preset Collection Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub7sec">Analog Preset Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub8sec">Preset Label Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub9sec">Channel Label Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub10sec">Scaling Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub11sec">Scaling Value Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub12sec">Hardware Configuration Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub13sec">Gain Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub14sec">Offset Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub15sec">Input Coupling Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub16sec">High Pass Filter Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub17sec">DSP Filter Collection Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub18sec">DSP Filter Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub19sec">Frequency Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub20sec">Q Element</a> </li>
<li><a class="el" href="chpresetxml_page.html#ch3_sub21sec">Calculation Preset Element</a></li>
</ul>
<h3><a class="anchor" name="ch3_sub1sec">
Limitations</a></h3>
Channel Presets XML files are mainly used for configuring the MP36R/MP36A's analog channels. These files can also be used with the MP150, however scaling will be the only setting applied to the analog channel. Gain and Filter settings are usually configured via physical amplifier modules attached to the MP150.<p>
This document only specifies the analog channel presets.<h3><a class="anchor" name="ch3_sub2sec">
XML Declaration</a></h3>
The first line of the file must be <span class="xmlsnippet">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span>.<p>
This declares that the text file is a XML file version 1.0 file that is encoded in UTF-8.<h3><a class="anchor" name="ch3_sub3sec">
XML Stylesheet Declaration</a></h3>
The second line of the file must be <span class="xmlsnippet">&lt;?xml-stylesheet type="text/xsl" href="channelpresets-stylesheet.xsl"?&gt;</span>.<h3><a class="anchor" name="ch3_sub4sec">
Element Style</a></h3>
Element tag names must be lower case. For example, use the opening and closing tags <span class="xmlsnippet">&lt;presetlabel&gt;&lt;/presetlabel&gt;</span> instead of <span class="xmlsnippet">&lt;PresetLabel&gt;&lt;/PresetLabel&gt;</span>.<h3><a class="anchor" name="ch3_sub5sec">
Channel Preset Collection Element</a></h3>
The Channel Preset Collection Element is the root element of the file. It must be called "channelpresetcollection." It must use the namespace "http://www.biopac.com/ChannelPresets." It must validate against the schema called "channelpresets-schema.xsd." It must have a "version" attribute that specifies the version of the BIOPAC Channel Presets XML Format. It can have a "creator" attribute, which specifies the name of the software, or person that generated the file.<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;channelpresetcollection xmlns="http://www.biopac.com/ChannelPresets" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.biopac.com/ChannelPresets channelpresets-schema.xsd" version="1.0" creator="PresetXMLEditor"&gt;</span>. The root element should have an Analog Preset Collection Element and a Calculation Preset Collection. These must appear in order.<h3><a class="anchor" name="ch3_sub6sec">
Analog Preset Collection Element</a></h3>
The Analog Preset Collection represents a list of Analog Presets. It must be called "analogpresetcollection." It can contain zero or more Analog Preset Elements.<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;analogpresetcollection&gt;</span>.<h3><a class="anchor" name="ch3_sub7sec">
Analog Preset Element</a></h3>
The Analog Preset Element represents an Analog Preset. It must be called "analogpreset." It must have an attribute called "uid" with a value that is unique in the entire document. The value of the "uid" attribute must start with a letter followed by zero or more numbers or letters.<p>
The opening tag of this element must be similar to <span class="xmlsnippet">&lt;analogpreset uid="a2"&gt;</span>.<p>
Each Analog Preset Element must contain a Preset Label Element, a Channel Label Element, a Units Label Element, a Scaling Element, and a Hardware Configuration Element. These elements must appear in order.<h3><a class="anchor" name="ch3_sub8sec">
Preset Label Element</a></h3>
The Preset Label Element represents a Preset Label. It must be called "presetlabel." It is a text description of the preset.<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;presetlabel&gt;</span>.<h3><a class="anchor" name="ch3_sub9sec">
Channel Label Element</a></h3>
The Channel Label Element represents a Channel Label. It must be called "channellabel." It is a text description of the channel.<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;channellabel&gt;</span>.<h3><a class="anchor" name="ch3_sub10sec">
Scaling Element</a></h3>
The Scaling Element represents a collection of scaling values. It must be called "scaling."<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;scaling&gt;</span>.<p>
A Scaling Element must contain two Scaling Value Elements.<h3><a class="anchor" name="ch3_sub11sec">
Scaling Value Element</a></h3>
A Scaling Value Element represents a scale mapping. It must be called "value." It must have the attributes "unscaled" and "scaled." The "unscaled" attribute represents the unscaled native input unit of the BHAPI, which is volts. The "scaled" attribute represent what the unscaled value should map to in the desired units.<p>
The opening tag of this element must be similar to <span class="xmlsnippet">&lt;value unscaled="0.011000000000000" scaled="1.000000000000000" /&gt;</span>.<h3><a class="anchor" name="ch3_sub12sec">
Hardware Configuration Element</a></h3>
A Settings Element contains the gain, offset, input coupling and high pass filter of the channel. It must be called "settings."<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;settings&gt;</span>.<p>
A Settings Element must contain a Gain Element, an Offset Element, an Input Coupling Element and a High Pass Filter Element. These elements must appear in order.<h3><a class="anchor" name="ch3_sub13sec">
Gain Element</a></h3>
The Gain Element represents the gain of a particular channel. It must be called "gain."<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;gain&gt;</span>.<h3><a class="anchor" name="ch3_sub14sec">
Offset Element</a></h3>
The Offset Element represents the offset of a particular channel. It must be called "offset."<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;offset&gt;</span>.<h3><a class="anchor" name="ch3_sub15sec">
Input Coupling Element</a></h3>
The Input Coupling Element represents the input coupling of a particular channel. It must be called "inputcoupling." Its value must be "AC" or "DC" (case sensitive).<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;inputcoupling&gt;</span>.<h3><a class="anchor" name="ch3_sub16sec">
High Pass Filter Element</a></h3>
The High Pass Filter Element represents the hardware high pass filter of a particular channel when the channel is AC coupled. It must be called "highpassfilter."<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;highpassfilter&gt;</span>.<h3><a class="anchor" name="ch3_sub17sec">
DSP Filter Collection Element</a></h3>
The DSP Filter Collection Element represents a list of DSP Filters applied to a particular channel. It must be called "dspfiltercollection."<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;dspfiltercollection&gt;</span>.<p>
A DSP Filter Collection Element must contain one or more DSP Filter Elements.<h3><a class="anchor" name="ch3_sub18sec">
DSP Filter Element</a></h3>
The DSP Filter Element represents a DSP Filter applied to a particular channel. It must be called "dspfilter." It must have an attribute called "type." The "type" attribute must have a value of "None," "LowPass," "HighPass," "BandPass," "BandStop," or "BandStopLineFrequency."<p>
The opening tag of this element must be similar to <span class="xmlsnippet">&lt;dspfilter type="LowPass"&gt;</span>.<p>
A DSP Filter Element must contain a Frequency Element and a Q Element.<h3><a class="anchor" name="ch3_sub19sec">
Frequency Element</a></h3>
The Frequency Element represents the frequency a particular DSP Filter should apply. It must be called "frequency."<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;frequency&gt;</span>.<h3><a class="anchor" name="ch3_sub20sec">
Q Element</a></h3>
The Frequency Element represents the Q a particular DSP Filter should apply. It must be called "q."<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;q&gt;</span>.<h3><a class="anchor" name="ch3_sub21sec">
Calculation Preset Element</a></h3>
The Calculation Preset represents a list of calculation channel presets. This must be present in the file even though it is currently undefined. It must be called "calcpresetcollection."<p>
The opening tag of this element must be <span class="xmlsnippet">&lt;calcpresetcollection&gt;</span>.<h2><a class="anchor" name="ch4_sec">
Format Validation</a></h2>
The format must validate against a schema or a doctype. It must also be validated during parsing. The current version is validated with a schema called "channelpresets-schema.xsd."<h2><a class="anchor" name="ch5_sec">
Format Styling</a></h2>
The format is styled with the stylesheet called "channelpresets-stylesheet.xsl." If an XML format is opened in software that supports XML Stylesheet, it will render it according to the specified stylesheet. Most modern web browsers support XML Stylesheets. The current stylesheet renders the BIOPAC Channel Presets XML File as follows:<p>
<div align="center">
<img src="chprexmlrendered.jpg" alt="chprexmlrendered.jpg">
<p><strong>BIOPAC Channel Presets XML file viewed in a web browser.</strong></p></div>
<h2><a class="anchor" name="ch6_sec">
File Dependencies</a></h2>
The Channel Presets XML file must be located in the same directory as the "channelpresets-stylesheet.xsl" and "channelpresets-schema.xsd" files.<h2><a class="anchor" name="ch7_sec">
Example</a></h2>
An example of a custom preset file with three Analog Channel Preset defined.<p>
<div class="fragment"><pre>
&lt;?xml version=<span class="stringliteral">"1.0"</span> encoding=<span class="stringliteral">"utf-8"</span> ?&gt;
&lt;?xml-stylesheet type=<span class="stringliteral">"text/xsl"</span> href=<span class="stringliteral">"channelpresets-stylesheet.xsl"</span>?&gt;
&lt;channelpresetcollection xmlns=<span class="stringliteral">"http://www.biopac.com/ChannelPresets"</span> 
        xmlns:xsi=<span class="stringliteral">"http://www.w3.org/2001/XMLSchema-instance"</span>
        xsi:schemaLocation=<span class="stringliteral">"http://www.biopac.com/ChannelPresets channelpresets-schema.xsd"</span> 
        version=<span class="stringliteral">"1.0"</span> creator=<span class="stringliteral">"PresetXMLEditor"</span>&gt;
        &lt;analogpresetcollection&gt;
                &lt;analogpreset uid=<span class="stringliteral">"eeg1"</span>&gt;
                        &lt;presetlabel&gt;Electroencephalogram (EEG), .5 - 35 Hz&lt;/presetlabel&gt;
                        &lt;channellabel&gt;EEG (.5 - 35 Hz)&lt;/channellabel&gt;
                        &lt;unitslabel&gt;micro V&lt;/unitslabel&gt;
                        &lt;scaling&gt;
                                &lt;value unscaled=<span class="stringliteral">"-1.0"</span> scaled=<span class="stringliteral">"-1000000.0"</span> /&gt;
                                &lt;value unscaled=<span class="stringliteral">"1.0"</span> scaled=<span class="stringliteral">"1000000.0"</span> /&gt;
                        &lt;/scaling&gt;
                        &lt;hardwareconfig type=<span class="stringliteral">"35"</span>&gt;
                                &lt;settings&gt;
                                        &lt;gain&gt;20000&lt;/gain&gt;
                                        &lt;offset&gt;0.0000&lt;/offset&gt;
                                        &lt;inputcoupling&gt;AC&lt;/inputcoupling&gt;
                                        &lt;highpassfilter&gt;0.5&lt;/highpassfilter&gt;
                                &lt;/settings&gt;
                                &lt;dspfiltercollection&gt;
                                        &lt;dspfilter type=<span class="stringliteral">"LowPass"</span>&gt;
                                                &lt;frequency&gt;66.5000&lt;/frequency&gt;
                                                &lt;q&gt;0.5000&lt;/q&gt;
                                        &lt;/dspfilter&gt;
                                        &lt;dspfilter type=<span class="stringliteral">"LowPass"</span>&gt;
                                                &lt;frequency&gt;38.5000&lt;/frequency&gt;
                                                &lt;q&gt;1.0000&lt;/q&gt;
                                        &lt;/dspfilter&gt;
                                        &lt;dspfilter type=<span class="stringliteral">"BandStopLineFrequency"</span>&gt;
                                                &lt;frequency&gt;60.0000&lt;/frequency&gt;
                                                &lt;q&gt;1.0000&lt;/q&gt;
                                        &lt;/dspfilter&gt;
                                &lt;/dspfiltercollection&gt;
                        &lt;/hardwareconfig&gt;
                &lt;/analogpreset&gt;
                &lt;analogpreset uid=<span class="stringliteral">"a79"</span>&gt;
                        &lt;presetlabel&gt;Nerve Response (BSLCBL8)&lt;/presetlabel&gt;
                        &lt;channellabel&gt;Nerve Response&lt;/channellabel&gt;
                        &lt;unitslabel&gt;mV&lt;/unitslabel&gt;
                        &lt;scaling&gt;
                                &lt;value unscaled=<span class="stringliteral">"-0.001000000000000"</span> scaled=<span class="stringliteral">"-1.000000000000000"</span> /&gt;
                                &lt;value unscaled=<span class="stringliteral">"0.001000000000000"</span> scaled=<span class="stringliteral">"1.000000000000000"</span> /&gt;
                        &lt;/scaling&gt;
                        &lt;hardwareconfig type=<span class="stringliteral">"35"</span>&gt;
                                &lt;settings&gt;
                                        &lt;gain&gt;1000&lt;/gain&gt;
                                        &lt;offset&gt;0.0000&lt;/offset&gt;
                                        &lt;inputcoupling&gt;AC&lt;/inputcoupling&gt;
                                        &lt;highpassfilter&gt;0.5&lt;/highpassfilter&gt;
                                &lt;/settings&gt;
                                &lt;dspfiltercollection&gt;
                                        &lt;dspfilter type=<span class="stringliteral">"None"</span>&gt;
                                                &lt;frequency&gt;100.0000&lt;/frequency&gt;
                                                &lt;q&gt;0.7070&lt;/q&gt;
                                        &lt;/dspfilter&gt;
                                        &lt;dspfilter type=<span class="stringliteral">"None"</span>&gt;
                                                &lt;frequency&gt;100.0000&lt;/frequency&gt;
                                                &lt;q&gt;0.7070&lt;/q&gt;
                                        &lt;/dspfilter&gt;
                                        &lt;dspfilter type=<span class="stringliteral">"None"</span>&gt;
                                                &lt;frequency&gt;100.0000&lt;/frequency&gt;
                                                &lt;q&gt;0.7070&lt;/q&gt;
                                        &lt;/dspfilter&gt;
                                &lt;/dspfiltercollection&gt;
                        &lt;/hardwareconfig&gt;
                &lt;/analogpreset&gt;
                &lt;analogpreset uid=<span class="stringliteral">"a51"</span>&gt;
                        &lt;presetlabel&gt;Switch&lt;/presetlabel&gt;
                        &lt;channellabel&gt;Switch&lt;/channellabel&gt;
                        &lt;unitslabel&gt;Volts&lt;/unitslabel&gt;
                        &lt;scaling&gt;
                                &lt;value unscaled=<span class="stringliteral">"-0.001000000000000"</span> scaled=<span class="stringliteral">"-1.000000000000000"</span> /&gt;
                                &lt;value unscaled=<span class="stringliteral">"0.001000000000000"</span> scaled=<span class="stringliteral">"1.000000000000000"</span> /&gt;
                        &lt;/scaling&gt;
                        &lt;hardwareconfig type=<span class="stringliteral">"35"</span>&gt;
                                &lt;settings&gt;
                                        &lt;gain&gt;1000&lt;/gain&gt;
                                        &lt;offset&gt;0.0000&lt;/offset&gt;
                                        &lt;inputcoupling&gt;DC&lt;/inputcoupling&gt;
                                        &lt;highpassfilter&gt;0.05&lt;/highpassfilter&gt;
                                &lt;/settings&gt;
                                &lt;dspfiltercollection&gt;
                                        &lt;dspfilter type=<span class="stringliteral">"LowPass"</span>&gt;
                                                &lt;frequency&gt;30.0000&lt;/frequency&gt;
                                                &lt;q&gt;0.7070&lt;/q&gt;
                                        &lt;/dspfilter&gt;
                                        &lt;dspfilter type=<span class="stringliteral">"BandStopLineFrequency"</span>&gt;
                                                &lt;frequency&gt;60.0000&lt;/frequency&gt;
                                                &lt;q&gt;1.0000&lt;/q&gt;
                                        &lt;/dspfilter&gt;
                                        &lt;dspfilter type=<span class="stringliteral">"None"</span>&gt;
                                                &lt;frequency&gt;60.0000&lt;/frequency&gt;
                                                &lt;q&gt;1.0000&lt;/q&gt;
                                        &lt;/dspfilter&gt;
                                &lt;/dspfiltercollection&gt;
                        &lt;/hardwareconfig&gt;
                &lt;/analogpreset&gt;
        &lt;/analogpresetcollection&gt;
        &lt;calcpresetcollection&gt;&lt;/calcpresetcollection&gt;
&lt;/channelpresetcollection&gt;
</pre></div><h2><a class="anchor" name="ch8_sec">
Annotated Example</a></h2>
An annotated example of a custom preset file with one Analog Channel Preset defined.<p>
<div align="center">
<img src="chpresetxmlannotated.jpg" alt="chpresetxmlannotated.jpg">
<p><strong>Annotated example of a BIOPAC Channel Presets XML file</strong></p></div>
<p>
<dl compact><dt><b>&nbsp;</b></dt><dd></dd></dl>
<div class="footer">
All trademarks and copyrights used are properties of their respective owners.
<br />
Copyright &copy; 2005-2024 <a href="http://www.biopac.com/" onclick="bwin = window.open('http://www.biopac.com/','bwin'); bwin.focus(); return false;">BIOPAC Systems, Inc.</a> All Rights Reserved.
</div>
</body>
</html>
