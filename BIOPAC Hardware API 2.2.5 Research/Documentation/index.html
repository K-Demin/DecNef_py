<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>BIOPAC Hardware API 2.2.5: Reference Manual</title>
<style type="text/css">
		@import "biopacapi.css";
		@import "tabs.css";
</style>
</head>
<body>
<!-- Generated on Fri Feb 16 10:56:28 2024 -->
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindexHL" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>Reference Manual </h1>
<p>
<h3 align="center">2.2.5 </h3><h2><a class="anchor" name="pref_sec">
Preface</a></h2>
An Application Programming Interface, API, is a set of tools, protocols and/or functions that facilitates software development. It provides layers of abstraction over complex and tedious programming tasks. APIs are programming building blocks that can be used to build other applications. Often, the implementation of an API is compiled in binary format called Dynamic Link Library, DLL.<h2><a class="anchor" name="intro_sec">
Introduction</a></h2>
This manual describes the C/C++ functions of the BIOPAC Hardware API and the generic usage of the API methods. These functions give software developers control over the BIOPAC MP device. Currently, the supported MP devices are the MP150, MP160 and MP200 communicating via Ethernet using UDP and the MP36R, MP36AR communicating via USB.<p>
Using the Hardware API functions, software developers can:<p>
<ul>
<li>Acquire data from the analog and digital channels </li>
<li>Acquire at different sample rates </li>
<li>Set triggers </li>
<li>Get the MP device status </li>
<li>Use the Analog output channels </li>
<li>Access the electrode checker (MP36R, MP36AR only).</li>
</ul>
The implementation of these functions is compiled into a Windows DLL called "mpdev.dll." Although the interface is documented here in C/C++, any programming language that is able to utilize Windows DLLs should be able to access the BIOPAC Hardware API.<h2><a class="anchor" name="thread_sec">
Thread Safety</a></h2>
The BIOPAC Hardware API is not reentrant or thread safe. It is designed to be accessed by a single thread from a single process.<h2><a class="anchor" name="overview_sec">
Function Overview</a></h2>
There are a total of 25 functions implemented. These functions are designed to give basic control over the MP device. They are grouped in the following categories:<p>
<ul>
<li><a class="el" href="index.html#connectfunc">Connection Functions</a> </li>
<li><a class="el" href="index.html#configfunc">Configuration Functions</a> </li>
<li><a class="el" href="index.html#acqctrlfunc">Acquisition Control Functions</a> </li>
<li><a class="el" href="index.html#genctrlfunc">Generic Control Functions</a> </li>
<li><a class="el" href="index.html#smpltransfunc">Simple Data Transfer Functions</a> </li>
<li><a class="el" href="index.html#advtransfunc">Advanced Data Transfer Functions</a> </li>
<li><a class="el" href="index.html#mpspfcfunc">MP Device Specific Functions</a></li>
</ul>
<h3><a class="anchor" name="connectfunc">
Connection Functions</a></h3>
<ul>
<li><a class="el" href="mpdev_8h.html#a48">connectMPDev()</a> </li>
<li><a class="el" href="mpdev_8h.html#a49">disconnectMPDev()</a></li>
</ul>
This set of functions is the setup and teardown functions of the API, respectively. It controls most of the protection mechanism that prevents damage to the system. Once a successful connection has been established, almost all of the functions are invoked in the same manner regardless of the MP device or communication type.<h3><a class="anchor" name="configfunc">
Configuration Functions</a></h3>
<ul>
<li><a class="el" href="mpdev_8h.html#a47">configChannelByPresetID()</a> </li>
<li><a class="el" href="mpdev_8h.html#a53">getChScaledInputRange()</a> </li>
<li><a class="el" href="mpdev_8h.html#a60">loadXMLPresetFile()</a> </li>
<li><a class="el" href="mpdev_8h.html#a65">setAcqChannels()</a> </li>
<li><a class="el" href="mpdev_8h.html#a66">setAnalogChScale()</a> </li>
<li><a class="el" href="mpdev_8h.html#a69">setDigitalAcqChannels()</a> </li>
<li><a class="el" href="mpdev_8h.html#a72">setSampleRate()</a> </li>
<li><a class="el" href="mpdev_8h.html#a71">setMPTrigger()</a></li>
</ul>
This set of functions configures the MP device for the next acquisition. It sets up the active channels that the MP device will acquire on, the sample rate and the triggering configuration of the acquisition. This set of functions can also configure the acquisition channels for signal scaling, gain and filter settings. BHAPI can only configure the MP36R/MP36AR's gain and filter settings using these functions. The <a class="el" href="mpdev_8h.html#a53">getChScaledInputRange()</a> can return the valid maximum and minimum input range.<h3><a class="anchor" name="acqctrlfunc">
Acquisition Control Functions</a></h3>
<ul>
<li><a class="el" href="mpdev_8h.html#a73">startAcquisition()</a> </li>
<li><a class="el" href="mpdev_8h.html#a75">stopAcquisition()</a></li>
</ul>
This set of functions starts and stops the MP device from acquiring data. If triggering is set, <a class="el" href="mpdev_8h.html#a73">startAcquisition()</a> will be block until the trigger arrives. Acquisitions can be aborted at anytime, including while waiting for a trigger, by calling <a class="el" href="mpdev_8h.html#a75">stopAcquisition()</a>.<h3><a class="anchor" name="genctrlfunc">
Generic Control Functions</a></h3>
<ul>
<li><a class="el" href="mpdev_8h.html#a54">getDigitalIO()</a> </li>
<li><a class="el" href="mpdev_8h.html#a59">getStatusMPDev()</a> </li>
<li><a class="el" href="mpdev_8h.html#a67">setAnalogOut()</a> </li>
<li><a class="el" href="mpdev_8h.html#a68">setAnalogOutputMode()</a> </li>
<li><a class="el" href="mpdev_8h.html#a70">setDigitalIO()</a></li>
</ul>
This set of functions allows control of features of the MP device. With these functions you can query for the state of the MP device, set analog output channel voltage levels (MP36R/MP36AR device), redirect input channel to output one (MP36R/MP36AR) and set and get the states of any digital I/O line. These functions can be used anytime after a successful call to <a class="el" href="mpdev_8h.html#a48">connectMPDev()</a> but before a call to <a class="el" href="mpdev_8h.html#a49">disconnectMPDev()</a>.<h3><a class="anchor" name="smpltransfunc">
Simple Data Transfer Functions</a></h3>
<ul>
<li><a class="el" href="mpdev_8h.html#a56">getMostRecentSample()</a> </li>
<li><a class="el" href="mpdev_8h.html#a57">getMPBuffer()</a></li>
</ul>
This set of functions translates, and transfers acquired data from a MP device to the API client program. The function <a class="el" href="mpdev_8h.html#a56">getMostRecentSample()</a> polls the MP device of the levels of the acquisition channels at the time of function invocation. The function <a class="el" href="mpdev_8h.html#a57">getMPBuffer()</a> acquires the first sample up to the number samples requested by the client program and stores it on a section of memory specified by the client program. The function <a class="el" href="mpdev_8h.html#a57">getMPBuffer()</a> must only be invoked once per acquisition.<p>
This set of functions lacks the capability of streaming continuous real-time acquired data to the client program. Calling <a class="el" href="mpdev_8h.html#a56">getMostRecentSample()</a> repeatedly may miss samples and waiting for all requested samples to acquire may not be practical. This problem is solved by the <a class="el" href="index.html#advtransfunc">Advanced Data Transfer Functions</a>.<h3><a class="anchor" name="advtransfunc">
Advanced Data Transfer Functions</a></h3>
<ul>
<li><a class="el" href="mpdev_8h.html#a58">getMPDaemonLastError()</a> </li>
<li><a class="el" href="mpdev_8h.html#a74">startMPAcqDaemon()</a> </li>
<li><a class="el" href="mpdev_8h.html#a64">receiveMPData()</a></li>
</ul>
This set of functions improves the usability of the API. The function <a class="el" href="mpdev_8h.html#a74">startMPAcqDaemon()</a> starts a virtual server that will stream acquired data to the client once the <a class="el" href="mpdev_8h.html#a73">startAcquisition()</a> has been invoked. The client program can read the stream by calling the <a class="el" href="mpdev_8h.html#a64">receiveMPData()</a> function. This allows for real-time processing of data while a dedicated thread downloads, caches and streams the data to the client program. The thread is spawned from the same process that attached to the DLL. If a call to <a class="el" href="mpdev_8h.html#a64">receiveMPData()</a> fails, the client program can query what happened to the acquisition daemon by calling <a class="el" href="mpdev_8h.html#a58">getMPDaemonLastError()</a>. If the user decides to use this data transfer mechanism, the function <a class="el" href="mpdev_8h.html#a74">startMPAcqDaemon()</a> must called before the <a class="el" href="mpdev_8h.html#a73">startAcquisition()</a>. <a class="el" href="index.html#smpltransfunc">Simple Data Transfer Functions</a> should not be used in conjunction with this set of functions per acquisition.<h3><a class="anchor" name="mpspfcfunc">
MP Device Specific Functions</a></h3>
<ul>
<li><a class="el" href="mpdev_8h.html#a52">findAllMP150()</a> </li>
<li><a class="el" href="mpdev_8h.html#a61">readAvailableMP150SN()</a> </li>
<li><a class="el" href="mpdev_8h.html#a50">findAllMP160()</a> </li>
<li><a class="el" href="mpdev_8h.html#a62">readAvailableMP160SN()</a> </li>
<li><a class="el" href="mpdev_8h.html#a51">findAllMP200()</a> </li>
<li><a class="el" href="mpdev_8h.html#a63">readAvailableMP200SN()</a> </li>
<li><a class="el" href="mpdev_8h.html#a55">getElectrodeCheckImpedance()</a></li>
</ul>
These functions are MP device specific. These functions will only work with the correct MP device and communication settings. The <a class="el" href="mpdev_8h.html#a52">findAllMP150()</a> and <a class="el" href="mpdev_8h.html#a61">readAvailableMP150SN()</a> functions are specific to MP150 communicating via Ethernet using UDP. When the <a class="el" href="mpdev_8h.html#a52">findAllMP150()</a> function is invoked, a thread polls the routable network for all responding MP150s. It caches the serial number of all responding MP150s in the network and streams it to the client program as 8-bit ASCII characters terminated by a new line character. The client program in turn reads the stream by invoking <a class="el" href="mpdev_8h.html#a61">readAvailableMP150SN()</a>. The <a class="el" href="mpdev_8h.html#a50">findAllMP160()</a> and <a class="el" href="mpdev_8h.html#a62">readAvailableMP160SN()</a> functions are specific to MP160 communicating via Ethernet using UDP. When the <a class="el" href="mpdev_8h.html#a50">findAllMP160()</a> function is invoked, a thread polls the routable network for all responding MP160s. It caches the serial number of all responding MP160s in the network and streams it to the client program as 8-bit ASCII characters terminated by a new line character. The client program in turn reads the stream by invoking <a class="el" href="mpdev_8h.html#a62">readAvailableMP160SN()</a>. The <a class="el" href="mpdev_8h.html#a51">findAllMP200()</a> and <a class="el" href="mpdev_8h.html#a63">readAvailableMP200SN()</a> functions are specific to MP200 communicating via Ethernet using UDP. When the <a class="el" href="mpdev_8h.html#a51">findAllMP200()</a> function is invoked, a thread polls the routable network for all responding MP200s. It caches the serial number of all responding MP200s in the network and streams it to the client program as 8-bit ASCII characters terminated by a new line character. The client program in turn reads the stream by invoking <a class="el" href="mpdev_8h.html#a63">readAvailableMP200SN()</a>. The <a class="el" href="mpdev_8h.html#a55">getElectrodeCheckImpedance()</a> function is specific to the MP36R/MP36AR hardware. It measures the impedance of the electrode/skin contact of the electrodes connected to the Electrode Check input of the MP device with lower numbers being associated with better conductivity.<h2><a class="anchor" name="psuedocode_sec">
Logic Sequence of a Typical Data Acquisition</a></h2>
<ol>
<li>Connect to the MP device</li><li>Configure sample rate</li><li>Set the acquisition channels</li><li>Set the triggering (if necessary)</li><li>Acquire samples</li><li>Stop the acquisition</li><li>Process the data</li><li>Analyze the data</li><li>Disconnect from the MP device</li></ol>
<h2><a class="anchor" name="limit_sec">
Limitations</a></h2>
These MP features cannot be controlled using the BIOPAC Hardware API:<p>
<ul>
<li>Online Averaging </li>
<li>Pre-trigger </li>
<li>Hardware Stimulator </li>
<li>MP150/MP160/MP200 Memory Storage Acquisition Mode</li>
</ul>
<h2><a class="anchor" name="question_sec">
Questions?</a></h2>
If you have questions please consult the <a class="el" href="faq_page.html">BIOPAC Hardware API FAQ</a> first.<p>
Please click the Sample Programs button on the top to learn about programs utilizing the Hardware API written in various programming languages.<p>
<dl compact><dt><b>&nbsp;</b></dt><dd></dd></dl>
<div class="footer">
All trademarks and copyrights used are properties of their respective owners.
<br />
Copyright &copy; 2005-2024 <a href="http://www.biopac.com/" onclick="bwin = window.open('http://www.biopac.com/','bwin'); bwin.focus(); return false;">BIOPAC Systems, Inc.</a> All Rights Reserved.
</div>
</body>
</html>
